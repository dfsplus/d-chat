(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{677:function(e){e.exports=JSON.parse('{"name":"d-chat","version":"6.3.2","description":"Decentralized Chat on NKN","homepage":"http://losnappas.gitlab.io/d-chat","repository":{"type":"git","url":"https://gitlab.com/losnappas/d-chat"},"author":"","license":"MIT","bugs":{"url":"https://gitlab.com/losnappas/d-chat/issues"},"scripts":{"test":"echo \\"Error: no test specified\\" && exit 1","start:chrome":"npm run chrome-launch","start:firefox":"npm run firefox-launch","start:views":"APP_TARGET=WEB node scripts/start.js","dev":"APP_TARGET=EXT node scripts/dev.js","dev:ext":"APP_TARGET=EXT node scripts/dev.js","dev:web":"APP_TARGET=WEB node scripts/dev.js","build":"npm run i18n && BROWSERSLIST_CONFIG=./config/.browserslistrc-EXT APP_TARGET=EXT node scripts/build.js","build:web":"npm run i18n && BROWSERSLIST_CONFIG=./config/.browserslistrc-WEB APP_TARGET=WEB node scripts/build.js","build:pack":"npm run build && web-ext build -s extension --overwrite-dest","compress":"node scripts/compress","compress-keygen":"crx keygen","clean":"rimraf build/ dev/ dist/ extension/","lint":"eslint ./src ","lint:fix":"eslint ./src --fix","storybook":"start-storybook -p 6006","build-storybook":"build-storybook","chrome-launch":"node scripts/dev.js --browser=chrome","firefox-launch":"node scripts/dev.js --browser=firefox","i18n":"node scripts/i18n-remove.js && i18n-generate -d src/ -o src/_locales/en -l \'messages\' -p \' \' && node scripts/i18n.js"},"devDependencies":{"@babel/plugin-proposal-class-properties":"^7.10.4","@babel/plugin-transform-runtime":"^7.11.5","@babel/preset-env":"^7.11.5","@babel/preset-react":"^7.10.4","babel-eslint":"^10.1.0","caniuse-lite":"^1.0.30001123","copy-webpack-plugin":"^6.1.0","crx":"^5.0.1","css-loader":"^4.2.2","eslint":"^7.8.1","eslint-plugin-flowtype":"^5.2.0","eslint-plugin-react-hooks":"^4.1.0","html-loader":"^1.3.0","html-webpack-plugin":"^4.4.1","i18n-webpack-plugin-generate-json":"^1.1.0","node-sass":"^4.14.1","react-dev-utils":"^10.2.1","react-icons":"^3.11.0","string-replace-loader":"^2.3.0","style-loader":"^1.2.1","terser-webpack-plugin":"^4.1.0","web-ext":"^5.0.0","webpack-cli":"^3.3.12","worker-injector-generator-plugin":"^1.0.3","worker-loader":"^3.0.2"},"dependencies":{"@babel/core":"^7.11.5","@babel/plugin-proposal-optional-chaining":"^7.11.0","@babel/runtime":"^7.11.2","@rooks/use-interval":"^3.6.0","@rooks/use-timeout":"^3.6.0","@sharyn/react-router.privateroute":"^1.0.3","@storybook/addon-actions":"^6.0.21","@storybook/addon-links":"^6.0.21","@storybook/react":"^6.0.21","@svgr/webpack":"^5.4.0","b64-to-blob":"^1.2.19","babel-core":"7.0.0-bridge.0","babel-loader":"^8.1.0","babel-plugin-named-asset-import":"^0.3.6","babel-preset-react-app":"^9.1.2","base64-js":"^1.3.1","base64mime":"0.0.3","bfj":"^7.0.2","browser-passworder":"^2.0.3","browserslist":"^4.14.0","bulma":"^0.9.0","bulma-dashboard":"^0.3.1","bulma-divider":"0.x","bulma-switch":"^2.0.0","bulma-tooltip":"^3.0.2","case-sensitive-paths-webpack-plugin":"^2.3.0","chalk":"^4.1.0","chrome-launch":"^1.1.4","classnames":"^2.2.6","codemirror":"^5.57.0","colors":"^1.4.0","debounce":"^1.2.0","dexie":"^3.0.2","dom-serializer":"^1.0.1","domelementtype":"^2.0.1","domhandler":"^3.0.0","domutils":"^2.2.0","dotenv":"^8.2.0","dotenv-expand":"^5.1.0","emoji-mart":"^3.0.0","entities":"^2.0.3","eslint-config-react-app":"^5.2.1","eslint-loader":"^4.0.2","eslint-plugin-import":"^2.22.0","eslint-plugin-jsx-a11y":"^6.3.1","eslint-plugin-react":"^7.20.6","execa":"^4.0.3","file-loader":"^6.1.0","friendly-errors-webpack-plugin":"^1.7.0","fs-extra":"^9.0.1","highlight.js":"^10.1.2","history":"^5.0.0","html-webpack-include-assets-plugin":"^2.0.0","htmlparser2":"^4.1.0","identity-obj-proxy":"3.0.0","ieee754":"^1.1.13","is-number":"^7.0.0","is-only-emojis":"^1.0.1","lodash.escaperegexp":"^4.1.2","lodash.mergewith":"^4.6.2","lodash.throttle":"^4.1.1","lodash.uniq":"^4.5.0","lodash.uniqby":"^4.7.0","marked":"^1.1.1","mini-css-extract-plugin":"^0.11.0","nkn-permissioned-pubsub":"git+https://gitlab.com/losnappas/nkn-permissioned-pubsub.git","nkn-sdk":"^1.1.9","optimize-css-assets-webpack-plugin":"^5.0.4","ora":"^5.0.0","pnp-webpack-plugin":"^1.6.4","postcss":"^7.0.32","postcss-flexbugs-fixes":"^4.2.1","postcss-loader":"^3.0.0","postcss-preset-env":"^6.7.0","postcss-safe-parser":"^4.0.2","rc-table":"^7.9.7","react":"^16.13.1","react-app-polyfill":"^1.0.6","react-dom":"^16.13.1","react-infinite-scroller":"^1.2.4","react-markdown":"^4.3.1","react-modal":"^3.11.2","react-qr-svg":"^2.2.2","react-redux":"^7.2.1","react-resize-reporter":"^1.0.2","react-router-dom":"^5.2.0","react-simplemde-editor":"^4.1.3","react-stay-scrolled":"^7.1.0","react-timeago":"^4.4.0","redux":"^4.0.5","redux-devtools-extension":"^2.13.8","redux-thunk":"^2.3.0","redux-worker-middleware":"^1.0.0","resolve":"^1.17.0","sanitize-html":"^1.27.4","sass-loader":"^10.0.1","shasum":"^1.0.2","sleep-promise":"^8.0.1","source-map":"^0.7.3","srcset":"^3.0.0","striptags":"^3.1.1","supports-color":"^7.2.0","truncate":"^2.1.0","url-loader":"^4.1.0","uuid":"^8.3.0","webext-redux":"^2.1.7","webextension-polyfill":"^0.6.0","webpack":"^4.44.1","webpack-dev-server":"^3.11.0","webpack-manifest-plugin":"^2.2.0","xtend":"^4.0.2","yargs":"^15.4.1"}}')},694:function(e,a,t){"use strict";t.r(a);var n=t(3),l=t.n(n),s=t(9),r=t.n(s),c=t(18),i=t.n(c),o=t(1),m=t.n(o),d=t(31),u=t(45),p=t(23),b=t(4),v=function(){return null},E=t(19),h=t.n(E),f=t(669),g=function(e){var a=e.value;return m.a.createElement("div",{className:"x-qr-code"},m.a.createElement("span",{className:"x-qr-code-icon icon"},m.a.createElement(f.QRCode,{value:a,style:{width:"250px",height:"250px"}})))},N=t(60),x=function(e){var a=e.wallet,t=e.onSuccess,n=Object(o.useState)(""),l=i()(n,2),s=l[0],r=l[1],c=Object(o.useState)(""),d=i()(c,2),u=d[0],p=d[1];return m.a.createElement("div",{className:"form"},m.a.createElement("div",{className:"field"},m.a.createElement("div",{className:"control"},m.a.createElement("label",{className:"label"},Object(b.a)("Password"),m.a.createElement("span",{className:h()("x-is-transparent help is-danger is-inline x-visibility",{"x-has-opacity-1":!u})},u)),m.a.createElement("input",{placeholder:Object(b.a)("Password"),type:"password",className:"input text",onChange:function(e){return r(e.target.value)},value:s}))),m.a.createElement("div",{className:"field"},m.a.createElement("div",{className:"control"},m.a.createElement("a",{className:"button",onClick:function(){p("");try{var e=JSON.stringify(a),n=N.Wallet.fromJSON(e,{password:s});t(n)}catch(l){setTimeout((function(){return p(Object(b.a)("Wrong password."))}),0)}}},Object(b.a)("Show secret seed")))))},k=function(e){var a=e.wallet,t=Object(o.useState)(!1),n=i()(t,2),l=n[0],s=n[1],r=Object(o.useState)(""),c=i()(r,2),d=c[0],u=c[1],p=function(e){u(""),s(!1),null===e||void 0===e||e.preventDefault()};return m.a.createElement("div",{className:"buttons"},m.a.createElement("a",{className:"button",download:"".concat(a.Address,".json"),href:"data:text/plain;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(a,null,2)))},Object(b.a)("Export wallet")),m.a.createElement("a",{className:"button",onClick:function(e){e.preventDefault(),s(!0)}},Object(b.a)("Show secret seed")),m.a.createElement("div",{className:h()("modal",{"is-active":l})},m.a.createElement("div",{className:"modal-background",onClick:p}),m.a.createElement("div",{className:"modal-content x-has-normal-scrollbar"},m.a.createElement("div",{className:"box"},d?m.a.createElement("div",{className:"section"},m.a.createElement("div",{className:"title"},Object(b.a)("Your Wallet Seed")),m.a.createElement("div",{className:"x-seed"},m.a.createElement(g,{value:d}),m.a.createElement("p",{className:"section has-text-black"},m.a.createElement("span",{className:"x-seed-text"},d))),m.a.createElement("div",{className:"content has-text-dark"},m.a.createElement("p",null,m.a.createElement("strong",null,Object(b.a)("Anyone with this seed can recover your account. Do not mishandle it."))),m.a.createElement("p",null,Object(b.a)("Use this seed for exporting/importing your D-Chat account between devices."))),m.a.createElement("a",{onClick:p,className:"button is-link"},Object(b.a)("OK"))):m.a.createElement(x,{onSuccess:function(e){return u(e.getSeed())},wallet:a}))),m.a.createElement("button",{onClick:p,className:"modal-close","aria-label":Object(b.a)("Close")})))},w=t(121),j=function(e){var a=e.children,t=e.openerButtonContent,n=e.openerButtonClassName,l=void 0===n?"button":n,s=Object(o.useState)(!1),r=i()(s,2),c=r[0],d=r[1],u=function(){return d(!1)};return Object(o.useEffect)((function(){return document.addEventListener("keydown",u),function(){document.removeEventListener("keydown",u)}}),[]),m.a.createElement(m.a.Fragment,null,m.a.createElement("a",{className:l,onClick:function(){return d(!0)}},t),m.a.createElement("div",{className:h()("modal",{"is-active":c})},m.a.createElement("div",{className:"modal-background",onClick:u}),m.a.createElement("div",{className:"modal-content"},m.a.createElement("div",{className:"box"},m.a.createElement("div",{className:"section"},a))),m.a.createElement("a",{onClick:u,className:"modal-close","aria-label":Object(b.a)("Close")})))},O=t(124),y=t(589),C=(t(676),function(e){var a=e.client,t=e.children,n=e.getBalance,l=Object(o.useState)(!1),s=i()(l,2),r=s[0],c=s[1],d=Object(y.a)((function(){n(a.wallet.Address)}),1e4).start;return Object(o.useEffect)((function(){d()}),[]),m.a.createElement("div",{className:"tile is-ancestor",style:{overflowWrap:"anywhere",wordBreak:"all"}},m.a.createElement("div",{className:"tile is-parent is-vertical"},m.a.createElement("div",{className:"tile"},m.a.createElement("div",{className:"field"},!r&&m.a.createElement("a",{className:"button is-link is-outlined is-size-7",title:Object(b.a)("Expands on click"),onClick:function(){return c(!0)}},Object(b.a)("Show more account information")))),r&&m.a.createElement("div",{className:"tile is-vertical"},m.a.createElement("div",{className:"tile is-child"},m.a.createElement("div",{className:"field"},m.a.createElement("div",{className:"label has-text-weight-normal level is-mobile"},m.a.createElement("span",{className:"level-left"},Object(b.a)("Wallet address"),m.a.createElement("span",{className:"icon tooltip is-size-5","data-tooltip":Object(b.a)("Share this for receiving NKN payments.")},m.a.createElement(w.b,{className:"is-size-5"}))),m.a.createElement("span",{className:"level-right"},m.a.createElement(j,{openerButtonClassName:"button level-item",openerButtonContent:m.a.createElement("span",{className:"icon",title:Object(b.a)("QR Code")},m.a.createElement(O.c,null))},m.a.createElement(g,{value:a.wallet.Address})))),m.a.createElement("p",{className:"x-address-broken x-address"},a.wallet.Address))),m.a.createElement("div",{className:"tile is-child"},m.a.createElement("div",{className:"field"},m.a.createElement(k,{wallet:a.wallet}))),m.a.createElement("div",{className:"tile is-child"},m.a.createElement("div",{className:"field"},m.a.createElement("p",{className:"is-size-7 has-text-grey-darker"},Object(b.a)("Wallet balance")),m.a.createElement("p",null,a.balance||"?"," NKN")),t),m.a.createElement("div",{className:"tile is-child"},m.a.createElement("div",{className:"field"},m.a.createElement(v,null))))))}),S=t(314),T=function(){return m.a.createElement("div",{className:"container"},m.a.createElement("p",{className:"field",style:{wordBreak:"keep-all"}},Object(b.a)("Come and say hi on channel")," ",m.a.createElement(S.a,{textWrapClassName:"is-inline",topic:"d-chat"}),"."),m.a.createElement("div",{className:"content"},m.a.createElement("p",null,Object(b.a)("D-Chat is also a browser extension.")),m.a.createElement("div",{className:"level"},m.a.createElement("div",{className:"level-left"},m.a.createElement("a",{className:"level-item",target:"_blank",href:"https://addons.mozilla.org/en-US/firefox/addon/d-chat/",rel:"noopener noreferrer"},m.a.createElement("img",{src:"img/AMO-button_1.png",alt:Object(b.a)("Get the add-on for Firefox")})),m.a.createElement("a",{className:"level-item button is-text is-white is-hovered is-outlined has-text-dark",title:Object(b.a)("For Chromium based browsers, Chrome webstore"),target:"_blank",href:"https://chrome.google.com/webstore/detail/d-chat/glnmkakdjcognfgonjfcklpmjiobijii",rel:"noopener noreferrer"},Object(b.a)("Get the add-on for Chrome")))),m.a.createElement("p",null,Object(b.a)("Using MS Edge? See instructions")+" ",m.a.createElement("a",{href:"https://winaero.com/blog/install-chrome-extensions-in-microsoft-edge-chromium/",rel:"noopener noreferrer",target:"_blank",title:Object(b.a)("Install Chrome extensions in Edge, winaero.com")},"https://winaero.com/blog/install-chrome-extensions-in-microsoft-edge-chromium/"))),m.a.createElement("div",{className:"content"},m.a.createElement("p",null,Object(b.a)("Source code on GitLab.")," ",m.a.createElement("a",{href:"https://gitlab.com/losnappas/d-chat",rel:"noopener noreferrer",target:"_blank"},"https://gitlab.com/losnappas/d-chat"))))},A=t(2),B=t(677),P=function(){return m.a.createElement("div",{className:"field"},m.a.createElement("p",{className:"is-size-7"},Object(b.a)("D-Chat version")),m.a.createElement("p",null,B.version))},R=t(678),_=t(57),z=t(62),W=t(316),G=function(e){var a=e.privateChat,t=Object(d.useHistory)(),n=Object(o.useState)(""),l=i()(n,2),s=l[0],r=l[1];return m.a.createElement("form",{className:"field",onSubmit:function(e){if(e.preventDefault(),s){var n=s,l=a;!l&&Object(A.w)(n)&&(l=!0,n=Object(A.k)(n));var c=l?Object(A.m)(s):Object(A.i)(s);t.push(c),r("")}}},m.a.createElement("div",{className:"control"},m.a.createElement("input",{placeholder:a?Object(b.a)("Contact address"):Object(b.a)("Topic"),value:s,type:"text",className:"input is-small",onChange:function(e){return r(e.target.value)},maxLength:"128"})))},D=function(e){var a=e.addr,t=Object(A.y)(a),n=i()(t,2),l=n[0],s=n[1];return m.a.createElement("span",{className:"x-address-broken x-address has-text-black"},m.a.createElement("span",{className:"x-address-identifier"},l),l&&".",m.a.createElement("span",{className:"x-address-pubkey"},s))};a.default=Object(p.b)((function(e){return{client:e.clients.find((function(e){return e.active}))}}),(function(e){return{getBalance:function(a){return e(Object(_.d)(a))},updateContact:function(a){return e(Object(z.d)(a))}}}))((function(e){var a=e.client,t=e.getBalance,n=e.updateContact,s=Object(o.useState)(null),c=i()(s,2),d=c[0],p=c[1],v=function(){var e=r()(l.a.mark((function e(t){var s,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p(null),r=null===(s=t.target.files)||void 0===s?void 0:s[0]){e.next=4;break}return e.abrupt("return");case 4:if(!(r.size>10240)){e.next=7;break}return p(m.a.createElement("span",{className:"help is-danger"},Object(b.a)("File too large. Max size is 10kb."))),e.abrupt("return");case 7:return e.next=9,new Promise((function(e,a){var t=new FileReader;t.onload=function(a){e(a.target.result)},t.onerror=a,t.readAsDataURL(r)}));case 9:c=e.sent,n({addr:a.addr,requestType:"response/full",content:{avatar:{type:"base64",data:c}}});case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return m.a.createElement("div",{className:"container x-home"},m.a.createElement("div",{className:""},m.a.createElement("div",{className:""},m.a.createElement("div",{className:"section"},d,m.a.createElement("div",{className:"media"},m.a.createElement("div",{className:"media-left"},m.a.createElement("label",{htmlFor:"avatar-picker",className:"label is-relative x-avatar-picker-label x-has-hover"},m.a.createElement(W.a,{className:"is-128x128",addr:a.addr}),m.a.createElement(R.a,{className:"x-is-hover is-96x96 image x-avatar-picker-opener has-text-primary-dark","aria-label":Object(b.a)("Open image picker.")}),m.a.createElement("input",{title:Object(b.a)("Profile picture. Click to upload new."),type:"file",id:"avatar-picker",accept:"image/*",className:"is-overlay x-avatar-picker",onChange:v}))),m.a.createElement("div",{className:"media-content"},m.a.createElement("div",{className:"label has-text-weight-normal level is-mobile"},m.a.createElement("span",{className:"level-left"},Object(b.a)("Contact address")),m.a.createElement("span",{className:"level-right"},m.a.createElement(j,{openerButtonClassName:"button level-item",openerButtonContent:m.a.createElement("span",{className:"icon",title:Object(b.a)("QR Code")},m.a.createElement(O.c,null))},m.a.createElement(g,{value:a.addr})))),m.a.createElement("p",null,m.a.createElement(D,{addr:a.addr})))),m.a.createElement("hr",{className:"is-divider"}),m.a.createElement("div",{className:"field"},m.a.createElement("label",{className:"label has-text-weight-normal"},Object(b.a)("Join a chatroom")),m.a.createElement("div",{className:"control"},m.a.createElement(G,null))),m.a.createElement("div",{className:"field"},m.a.createElement("label",{className:"label has-text-weight-normal"},Object(b.a)("Private message")),m.a.createElement("div",{className:"control"},m.a.createElement(G,{privateChat:!0})))),m.a.createElement("div",{className:"section"},m.a.createElement("div",{className:"content"},m.a.createElement("p",null,m.a.createElement(u.b,{to:"/topics"},Object(b.a)("Public chat index"))),m.a.createElement(T,null)),a&&m.a.createElement(C,{client:a,getBalance:t},m.a.createElement(P,null))))))}))}}]);